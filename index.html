<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Visualizador y Chatbot BPMN</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Oxanium:wght@200..800&display=swap"
      rel="stylesheet"
    />
    <!-- bpmn-js library - Changed to bpmn-navigated-viewer for built-in zoom and pan -->
    <script src="https://unpkg.com/bpmn-js/dist/bpmn-navigated-viewer.development.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body class="bg-gray-100 min-h-screen p-6 text-gray-800">
    <div class="container mx-auto p-6">
      <h1 class="text-3xl font-bold text-center text-gray-500 mb-8">
        Chatbot con BPMN
      </h1>
      <div class="grid grid-cols-1 xl:grid-cols-3 gap-4">
        <!-- BPMN Visualizer Section -->
        <div
          class="mb-10 p-6 bg-gray-50 shadow-md rounded-[.2vw] h-[550px] col-span-2"
        >
          <h2 class="text-2xl font-semibold text-gray-400 mb-4">
            Diagramas BPMN
          </h2>
          <div id="diagram-viewer" class="diagram-container mt-4"></div>
          <p class="text-xs text-gray-400 mt-5">
            Nota: Hacer click en el diagrama para poder verlo mas comodamente.
            Con ctrl + zoom podes agrandar o achicar el mismo para su mejor
            visualizacion.
          </p>
        </div>
        <!-- Chatbot Section -->
        <div
          class="p-6 bg-gray-50 shadow-md rounded-[.2vw] h-[550px] flex flex-col"
        >
          <h2 class="text-2xl font-semibold text-gray-400 mb-4">
            Chatbot Basado en BPMN
          </h2>
          <div class="flex-1 flex flex-col">
            <div
              id="chat-messages"
              class="chat-messages border-2 border-gray-200"
            >
              <!-- Chat messages will appear here -->
            </div>
            <div class="mt-4 flex gap-2">
              <input
                type="text"
                id="user-input"
                class="flex-grow p-3 border-2 border-red-300 rounded-md focus:outline-none focus:border-gray-400 bg-red-50"
                placeholder="Escriba su mensaje..."
                disabled
              />
              <button
                id="send-button"
                onclick="sendButtonClick()"
                class="bg-gray-100 border-2 border-gray-200 hover:bg-gray-200 text-gray-500 font-bold py-2 px-4 rounded-[.2vw] shadow-md transition-all duration-300"
                disabled
              >
                Enviar
              </button>
              <button
                onclick="startChatClick()"
                class="bg-gray-100 border-2 border-purple-200 hover:bg-purple-200 text-gray-500 font-bold py-2 px-4 rounded-[.2vw] shadow-md transition-all duration-300"
              >
                Iniciar Chat
              </button>
            </div>
          </div>
          <p class="text-xs text-gray-400 mt-5">
            Nota: Este chatbot simula un flujo conversacional basado en el
            diagrama BPMN de la izquierda. Podras ir viendo el paso a paso en el
            mismo. Para las compuertas, le pedir√° opciones de acuerdo a los
            nombres de los flujos.
          </p>
        </div>
      </div>
    </div>

    <!-- Custom Modal for Alerts -->
    <div id="custom-modal" class="modal hidden">
      <div class="modal-content">
        <span
          class="close-button"
          id="close-modal-btn"
          onclick="closeModalClick()"
          >&times;</span
        >
        <h3
          class="text-xl font-semibold text-gray-800 mb-3"
          id="modal-title"
        ></h3>
        <p id="modal-message" class="text-gray-700"></p>
      </div>
    </div>

    <script src="src/frontend.js"></script>
  </body>
</html>
